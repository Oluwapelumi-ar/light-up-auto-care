<div class="dashboard-main-wrapper">

    <!-- ============================================================== -->
    <!-- navbar -->
    <!-- ============================================================== -->
    <app-header></app-header>
    <!-- ============================================================== -->
    <!-- end navbar -->
    <!-- ============================================================== -->

    <!-- ============================================================== -->
    <!-- left sidebar -->
    <!-- ============================================================== -->
    <app-side-menu></app-side-menu>
    <!-- ============================================================== -->
    <!-- end left sidebar -->
    <!-- ============================================================== -->

    <div class="dashboard-wrapper">
        <div class="dashboard-finance">
            <div class="container-fluid dashboard-content">
                <nav class="navbar navbar-light bg-light">
                    <div class="container d-flex">
                        <h2>Quote Page</h2> 
                    </div>
                </nav>   
                <div *ngIf="isQuoteCreated" class="bg-success">Quote Added Successfully</div> 
                <form #addQuoteForm="ngForm" class="all-Forms" (submit)="addQuoteType" [formGroup]="addQuoteTypeForm">

                    <div class="form-group">
                        <label>
                        Client Name
                        </label>
                        <ng-select  [items]="clients"  bindLabel="name"  bindValue="id" formControlName="clientId" (keyup)="trackClientId()"></ng-select>
                        <div class="text-danger" *ngIf="addQuoteTypeForm.get('clientId')?.hasError('required') && addQuoteTypeForm.get('clientId')?.touched">Client Id is required</div>
                        <div class="text-danger" *ngIf="addQuoteTypeForm.get('clientId')?.hasError('minlength') && addQuoteTypeForm.get('clientId')?.touched">Client Id should be a minimum length of 10 characters</div>
                        <div class="text-danger" *ngIf="addQuoteTypeForm.get('clientId')?.hasError('maxlength') && addQuoteTypeForm.get('clientId')?.touched">Client Id should have a maximum length of 20 characters</div>
                           

                    </div>

                    <div class="form-group">
                        <label>
                        Vehicle Name
                        </label>
                        <ng-select [items]="vehicle" bindLabel="vehicleName" bindValue="id" formControlName="vehicleId"></ng-select>
                        <div class="text-danger" *ngIf="vehicleIDControl?.hasError('required') && vehicleIDControl?.touched">Vehicle Id is required</div>
                        <div class="text-danger" *ngIf="vehicleIDControl?.hasError('maxlength') && vehicleIDControl?.touched">Vehicle Id should be a maximum length of 10 characters</div>
                        <div class="text-danger" *ngIf="vehicleIDControl?.hasError('minlength') && vehicleIDControl?.touched">Vehicle Id should be a minimum length of 5characters</div>

                    </div>

                    <div class="form-group" formArrayName="items">
                        <label>Services</label>
                        
                        <div *ngFor="let creds of itemsFormArray.controls; let i = index;" >
                            <ng-container [formGroupName]="i">
                                <div class="form-group">
                                    
                                <ng-select [items]="item" bindLabel="name" bindValue="name" formControlName="item"></ng-select>
                                    <div (click)="removeItems(i)"><i class="fas fa-trash"></i></div>
                                    <div (click)="addItems()"><i class="fas fa-plus"></i> </div>
                                   
                                </div>

                            <div class="marginalized">
                                <div class="form-group">    
                                <input type="number" formControlName="unit" class="form-control" placeholder="unit"> 
                                                              
                                </div>

                                <div class="form-group">
                                <input type="number" formControlName="rate" class="form-control" placeholder="rate">
                                </div>

                                <div class="form-group">
                                 <input type="number" formControlName="amount" class="form-control" placeholder="amount">
                                </div>
                            </div>
                                 </ng-container>
                        </div>

                    </div>
                    
                    <button (click)="addQuoteType(addQuoteForm)" [disabled]="!addQuoteTypeForm.valid">Post Quote</button>
                    

                    <button (click)="updateQuote">Update Quote</button>
                    
                    <button (click)="deleteQuote">Delete Quote</button>
                    <p> {{ quotes | json}}</p>

                    <ul *ngFor="let quote of quotes">
                        <li>{{ quote }}</li>
                    </ul>
                </form>  
                
            </div>
        </div>
    </div>

    
</div>

